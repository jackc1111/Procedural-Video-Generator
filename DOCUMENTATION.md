# Procedural Video Generator (PVG) - Detailed Documentation

Цей документ містить повний опис можливостей системи, наявних ефектів та інструкції щодо створення власних скриптів для генерації відео.

---

## 1. Загальна концепція
PVG побудований як обгортка над двигуном **Manim Community**. Ви пишете звичайний Python-код, де описуєте об'єкти та анімації, а двигун перетворює їх на високоякісне відео. Система ідеально підходить для створення:
- Анімованих заставок (Intro).
- Інфографіки на основі даних.
- Пояснювальних врізок для YouTube та освітніх курсів.

---

## 2. Користування через CLI
Основний інструмент запуску — `src/generator.py`.

```bash
python src/generator.py [path_to_script.py] [ClassName] --quality [low|medium|high|4k]
```

### Параметри:
- **path_to_script.py**: Шлях до вашого Python-файлу зі сценою.
- **ClassName**: Назва класу (нащадок `Scene`), який потрібно відрендерити.
- **--quality**: Якість відео (по замовчуванню `high` - 1080p).
- **--output**: Папка для результатів (по замовчуванню `output`).

---

## 3. Бібліотека ефектів (GraphicsHelper)
Клас `GraphicsHelper` містить готові методи для створення преміальних візуалів. Вам не потрібно писати складну логіку з нуля.

### 3.1 Текстові оверлеї та титри
- **`create_lower_third(name, description, color=BLUE)`**
  - Створює професійну плашку у лівому нижньому куті.
  - *Стиль*: Напівпрозорий закруглений прямокутник ("glassmorphism").

### 3.2 Візуальні ефекти (VFX)
- **`create_glow(mobject, color=None, scale=1.2, opacity=0.3)`**
  - Додає багатошарове неонове сяйво навколо будь-якого векторного об'єкта (текст, коло, логотип).
  - *Порада*: Найкраще виглядає на темному фоні.

- **`create_abstract_background(depth=3)`**
  - Генерує процедурний фон з напівпрозорих "куль", що плавають.
  - *Використання*: Додайте через `self.add()` на початку сцени.

### 3.3 Робота з активами (PNG/SVG)
- **`load_image(filename, height=2)`**
  - Завантажує PNG/JPG файл з папки `assets/images/`.
  - Автоматично застосовує якісну фільтрацію (Bicubic).

- **`load_svg(filename, height=2)`**
  - Завантажує векторний SVG файл. Кожен елемент SVG можна анімувати окремо.

- **`create_masked_image(image_mobject, mask_shape)`**
  - Вписує зображення у фігуру (коло, квадрат тощо).
  - Створює стильний "колажний" ефект з рамкою навколо зображення.

### 3.4 3D Графіка
> [!IMPORTANT]
> При використанні 3D об'єктів ваш клас має успадковувати від `ThreeDScene`, а не від `Scene`. Не забудьте встановити ракурс камери через `self.set_camera_orientation()`!

- **`create_3d_cube(side_length=2, fill_color=BLUE, fill_opacity=0.75)`**
  - Створює 3D куб з заданими параметрами.
- **`create_3d_sphere(radius=1, fill_color=PURPLE, fill_opacity=0.75)`**
  - Створює 3D сферу.

---

## 4. Створення власної сцени (Шаблон)

Для створення нової врізки створіть файл у папці `examples/` та скористайтеся цим шаблоном:

```python
from manim import *
from graphics_helper import GraphicsHelper

class MyAmazingScene(Scene):
    def construct(self):
        # 1. Налаштування фону
        bg = GraphicsHelper.create_abstract_background(depth=5)
        self.add(bg)

        # 2. Створення об'єктів
        title = Text("Мій Заголовок", font_size=60)
        glow = GraphicsHelper.create_glow(title, color=ORANGE)
        
        # 3. Анімація появи
        self.play(Write(title), FadeIn(glow))
        self.wait(2)

        # 4. Трансформація (Connective Graphics)
        subtitle = Text("Опис проекту", color=YELLOW).next_to(title, DOWN)
        self.play(ReplacementTransform(title, subtitle), FadeOut(glow))
        self.wait(1)
```

---

## 5. Технічні Нюанси та Стабільність
Щоб ваші скрипти завжди рендерилися без помилок, дотримуйтеся цих правил:

### 5.1 Кольори
- Не використовуйте константи `CYAN` або `ELECTRIC_BLUE` (вони можуть бути відсутні). 
- Використовуйте стандартні: `BLUE`, `BLUE_B`, `BLUE_D`, `TEAL`, `ORANGE`, `PURPLE`, `YELLOW`.

### 5.2 Робота з 3D Камерою
- Для анімації камери використовуйте `self.move_camera(phi=..., theta=..., run_time=...)`.
- **НЕ** використовуйте `self.camera.animate` — це призведе до помилки.
- Для миттєвого встановлення ракурсу (без анімації) використовуйте `self.set_camera_orientation(...)`.

### 5.3 Трансформації та Зображення
- При переході від звичайних фігур (VMobjects) до зображень (ImageMobjects або колажів) використовуйте `FadeIn`/`FadeOut`.
- `ReplacementTransform` може видати помилку `fill_rgbas`, якщо типи об'єктів занадто різні.

---

## 6. Поради для AI (Gemini Gems)
- Завжди перевіряйте наявність асетів через `try/except` або використовуйте стандартні назви (`tech.png`, `nature.png`).
- Використовуйте `add_updater` для фонових об'єктів для створення ефекту "живого" відео.

---

## 7. Поради для ефективної розробки

1. **Test fast, render slow**: Використовуйте `--quality low` під час розробки. Рендеринг відбуватиметься за секунди. Для фіналу використовуйте `high` або `4k`.
2. **Updaters для динаміки**: Використовуйте метод `add_updater` для створення постійного руху (наприклад, повільне обертання логотипів або плавання фону).
3. **Connective Transitions**: Завжди намагайтеся трансформувати один об'єкт в інший через `ReplacementTransform` замість звичайного `FadeOut/FadeIn`. Це створює відчуття преміального контенту.
4. **Структура папок**: Завжди кладіть зображення в `assets/images/`. Це гарантує, що шлях до них буде знайдено правильно незалежно від того, звідки ви запускаєте генератор.

---

Система спроектована так, що ви можете додавати нові методи в `src/graphics_helper.py`. Якщо ви бачите, що часто повторюєте ту саму послідовність анімацій — винесіть її у `GraphicsHelper` як новий `@staticmethod`.
